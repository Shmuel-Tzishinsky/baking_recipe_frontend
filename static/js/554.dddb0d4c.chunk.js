"use strict";(self.webpackChunkbaking_recipe=self.webpackChunkbaking_recipe||[]).push([[554],{6554:(e,a,s)=>{s.r(a),s.d(a,{default:()=>x});var i=s(5043),t=s(3002),n=s(3156),c=s(6720),l=s(3825),r=s(184),o=s(5475),d=s(6216),m=s(1588),g=s(4808),h=s(579);const x=function(){const{updateNewRecipe:e,state:a}=(0,d.ZH)(),{error:x,allRecipes:p}=a;console.log("\ud83d\ude80 ~ AddNew ~ error:",x);const[j,u]=(0,i.useState)({title:"",image:null,categories:[],bakingTime:10,ingredients:[],instructions:"",notes:"",favorite:!1}),[v,y]=(0,i.useState)([]),[N,b]=(0,i.useState)(!1),[k,f]=(0,i.useState)(!1),[C,w]=(0,i.useState)(!1),[R,S]=(0,i.useState)(""),T=i.createRef(),Z=((0,i.useMemo)((()=>{const e=p.flatMap((e=>e.categories));y([...new Set(e)])}),[p]),e=>{const a=(e.value-e.min)/(e.max-e.min)*100;e.style.background="linear-gradient(to right, var(--main-color) ".concat(a,"%, var(--hover-blur-bg) ").concat(a,"%)")}),A=e=>{u((a=>{const s=a.categories.includes(e)?a.categories.filter((a=>a!==e)):[...a.categories,e];return{...a,categories:s}}))},F=(e,a)=>{const{name:s,value:i,type:t,alt:n}=e.target;if(console.log("\ud83d\ude80 ~ handleChange ~  name, value, type, alt :",s,i,t,n),"file"===t);else if("ingredients"===s){const e=j.ingredients.map(((e,a)=>a===parseFloat(n)?i:e)).filter((e=>""!==e));u({...j,ingredients:e.length?e:[""]})}else u({...j,[s]:i});console.log(j)};return(0,h.jsxs)("div",{className:"AddNew",children:[(0,h.jsxs)("div",{className:"cover-img",onClick:()=>{T.current.click()},children:[(0,h.jsx)("input",{type:"file",ref:T,name:"image",onChange:e=>{const a=e.target.files[0];null!==a&&void 0!==a&&a.type&&(["image/png","image/jpeg","image/jpg"].includes(null===a||void 0===a?void 0:a.type)?((e,a)=>{const s=new FileReader;s.readAsDataURL(e),s.onload=()=>{const i=new Image;i.src=s.result,i.onload=()=>{if(e.size<=524288)a(s.result);else{const e=document.createElement("canvas"),s=e.getContext("2d");e.width=i.width,e.height=i.height,s.drawImage(i,0,0,i.width,i.height),e.toBlob((e=>{const s=new FileReader;s.readAsDataURL(e),s.onload=()=>{a(s.result)}}),"image/jpeg",.7)}}}})(a,(a=>{u({...j,[e.target.name]:a})})):(0,m.Z)("\u05e0\u05d0 \u05dc\u05d4\u05e2\u05dc\u05d5\u05ea \u05e7\u05d5\u05d1\u05e5 \u05ea\u05de\u05d5\u05e0\u05d4 \u05d7\u05d5\u05e7\u05d9 (PNG, JPG, JPEG)."))},style:{display:"none"},accept:".png, .jpg, .jpeg"}),j.image&&(0,h.jsx)("img",{src:j.image,alt:""}),(0,h.jsx)("div",{className:"icon",style:{display:j.image?"none":""},children:(0,h.jsx)(t.N66,{})}),(0,h.jsx)("p",{style:{display:j.image?"none":""},children:"\u05d4\u05d5\u05e1\u05e3 \u05ea\u05de\u05d5\u05e0\u05ea \u05e9\u05e2\u05e8"}),(0,h.jsx)("p",{style:{display:j.image?"none":""},children:"Png, Jpg, Jpeg"})]}),(0,h.jsxs)("div",{className:"name",children:[(0,h.jsx)("h1",{children:"\u05e9\u05dd \u05d4\u05de\u05ea\u05db\u05d5\u05df"}),(0,h.jsx)("input",{type:"text",name:"title",placeholder:"\u05d4\u05db\u05e0\u05e1/\u05d9 \u05d0\u05ea \u05e9\u05dd \u05d4\u05de\u05ea\u05db\u05d5\u05df",value:j.title,onChange:F})]}),(0,h.jsxs)("div",{className:"description",children:[(0,h.jsx)("h1",{children:"\u05ea\u05d9\u05d0\u05d5\u05e8 \u05d4\u05de\u05ea\u05db\u05d5\u05df"}),(0,h.jsx)("textarea",{name:"description",placeholder:"\u05e1\u05e4\u05e8/\u05d9 \u05e7\u05e6\u05ea \u05e2\u05dc \u05d4\u05de\u05ea\u05db\u05d5\u05df",value:j.description,onChange:F})]}),(0,h.jsxs)("div",{className:"category",children:[(0,h.jsx)("h1",{children:"\u05e7\u05d8\u05d2\u05d5\u05e8\u05d9\u05d4"}),(0,h.jsxs)("div",{className:"category-container",children:[v.map(((e,a)=>(0,h.jsxs)("div",{className:"category-item",children:[(0,h.jsx)("input",{type:"checkbox",className:"category-item-checkbox",id:"category-".concat(a),checked:j.categories.includes(e),onChange:()=>A(e)}),(0,h.jsx)("label",{htmlFor:"category-".concat(a),className:"category-item-checklabel",children:e})]},a))),(0,h.jsx)("div",{className:"category-item btn",onClick:()=>b(!0),children:(0,h.jsx)("label",{className:"category-item-checklabel",children:(0,h.jsx)(n.OiG,{})})})]})]}),(0,h.jsxs)("div",{className:"Baking-time",children:[(0,h.jsxs)("h1",{children:["\u05d6\u05de\u05df \u05d4\u05d4\u05db\u05e0\u05d4 ",(0,h.jsx)("span",{children:"(\u05d1\u05d3\u05e7\u05d5\u05ea)"})]}),(0,h.jsxs)("div",{className:"text",children:[(0,h.jsx)("p",{className:60===j.bakingTime?"active":"",children:"< 60"}),(0,h.jsx)("p",{className:"active",children:j.bakingTime}),(0,h.jsx)("p",{className:j.bakingTime>=10?"active":"",children:"10 >"})]}),(0,h.jsx)("input",{type:"range",min:"10",max:"60",value:j.bakingTime,onChange:e=>{u({...j,bakingTime:e.target.value}),Z(e.target)},onInput:e=>Z(e.target),style:{background:"linear-gradient(to left, var(--main-color) ".concat(2*(j.bakingTime-10),"%, var(--hover-blur-bg) ").concat(2*(j.bakingTime-10),"%)")}})]}),(0,h.jsxs)("div",{className:"component-recipe",children:[(0,h.jsx)("h1",{children:"\u05de\u05e8\u05db\u05d9\u05d1\u05d9\u05dd"}),(0,h.jsxs)("div",{className:"component-recipe-container",children:[j.ingredients.map(((e,a)=>(0,h.jsxs)("div",{className:"component-recipe-item",children:[(0,h.jsx)("input",{type:"text",name:"ingredients",alt:a,placeholder:"\u05d4\u05d6\u05df \u05de\u05e8\u05db\u05d9\u05d1 ".concat(a+1),value:j.ingredients[a],onChange:F}),(0,h.jsx)("div",{className:"icon",children:(0,h.jsx)(l.pCS,{})})]},a))),(0,h.jsx)("input",{type:"text",value:"+ \u05d4\u05d5\u05e1\u05e3",style:{textAlign:"center",marginTop:"10px",cursor:"pointer",width:"calc(100% - 40px)",userSelect:"none"},onClick:()=>{""!==j.ingredients[j.ingredients.length-1]&&u((e=>({...e,ingredients:[...e.ingredients,""]})))},readOnly:!0})]})]}),(0,h.jsxs)("div",{className:"steps",children:[(0,h.jsx)("h1",{children:"\u05e6\u05e2\u05d3\u05d9\u05dd"}),(0,h.jsx)("div",{className:"steps-container",children:Array.from({length:1}).map(((e,a)=>(0,h.jsxs)(i.Fragment,{children:[(0,h.jsxs)("div",{className:"steps-item",children:[(0,h.jsx)("textarea",{type:"text",name:"instructions",placeholder:"\u05e1\u05e4\u05e8 \u05e7\u05e6\u05ea \u05db\u05dc \u05d4\u05d0\u05d5\u05db\u05dc \u05e9\u05dc\u05da",value:j.instructions,onChange:F}),(0,h.jsxs)("div",{className:"icon",children:[(0,h.jsx)("p",{children:a+1}),(0,h.jsx)(l.pCS,{})]})]}),(0,h.jsx)("div",{className:"step-img",onClick:()=>(0,m.Z)("\u05dc\u05d0 \u05e4\u05e2\u05d9\u05dc \u05d1\u05e9\u05dc\u05d1 \u05d4\u05d6\u05d4!"),children:(0,h.jsx)(r.p5B,{})})]},a)))})]}),(0,h.jsxs)("div",{className:"Remarks",style:{direction:"rtl"},children:[(0,h.jsx)("h1",{children:"\u05d4\u05e2\u05e8\u05d5\u05ea"}),(0,h.jsx)("textarea",{name:"notes",cols:"30",rows:"10",placeholder:"\u05d9\u05e9 \u05dc\u05da \u05d4\u05e2\u05e8\u05d5\u05ea?",value:j.notes,onChange:F})]}),(0,h.jsx)("button",{className:"active",style:{background:x?"#f33a3ad1":""},onClick:async()=>{try{if(null==j.image&&""===j.title)return void(0,m.Z)("\u05d4\u05d5\u05e1\u05e4\u05ea \u05ea\u05de\u05d5\u05e0\u05d4 \u05d5\u05e9\u05dd \u05d4\u05de\u05ea\u05db\u05d5\u05df \u05d4\u05dd \u05d7\u05d5\u05d1\u05d4.");if(""===j.title)return void(0,m.Z)("\u05d4\u05d5\u05e1\u05e4\u05ea \u05e9\u05dd \u05d4\u05ea\u05de\u05ea\u05db\u05d5\u05df \u05d7\u05d5\u05d1\u05d4.");if(null==j.image)return void(0,m.Z)("\u05d4\u05d5\u05e1\u05e4\u05ea \u05ea\u05de\u05d5\u05e0\u05d4 \u05d4\u05d9\u05d0 \u05d7\u05d5\u05d1\u05d4.");w(!0),j.userName=(0,g.$E)("name_user");const a=await e({NewRecipe:j});console.log(a),a&&f(!0)}catch(x){w(!1),(0,m.Z)("\u05dc\u05d0 \u05d4\u05e6\u05dc\u05d9\u05d7 \u05dc\u05e9\u05de\u05d5\u05e8 \u05d0\u05ea \u05d4\u05e0\u05ea\u05d5\u05e0\u05d9\u05dd.")}},disabled:C,children:"\u05e9\u05de\u05d5\u05e8"}),N&&(0,h.jsx)("div",{className:"modal",children:(0,h.jsxs)("div",{className:"modal-content",children:[(0,h.jsx)("h1",{children:"\u05d1\u05d7\u05e8 \u05e7\u05d8\u05d2\u05d5\u05e8\u05d9\u05d5\u05ea"}),(0,h.jsxs)("form",{children:[(0,h.jsx)("div",{className:"category-container",children:v.map(((e,a)=>(0,h.jsxs)("div",{className:"category-item",children:[(0,h.jsx)("input",{type:"checkbox",className:"category-item-checkbox",id:"modal-category-".concat(a),onChange:()=>A(e),checked:j.categories.includes(e)}),(0,h.jsx)("label",{htmlFor:"modal-category-".concat(a),className:"category-item-checklabel",children:e}),(0,h.jsx)("div",{className:"del",onClick:()=>y(v.filter((a=>a!==e))),children:(0,h.jsx)(c.b6i,{})})]},a)))}),(0,h.jsx)("input",{type:"text",value:R,onChange:e=>S(e.target.value),placeholder:"\u05d4\u05d5\u05e1\u05e3 \u05e7\u05d8\u05d2\u05d5\u05e8\u05d9\u05d4 \u05d7\u05d3\u05e9\u05d4"}),(0,h.jsxs)("div",{className:"btns",children:[(0,h.jsx)("button",{type:"button",style:{opacity:R.length>0?1:.4},onClick:e=>{e.preventDefault(),R&&!v.includes(R)&&y([...v,R]),S("")},className:"active",children:"\u05d4\u05d5\u05e1\u05e3"}),(0,h.jsx)("button",{type:"button",onClick:()=>b(!1),children:"\u05e1\u05d2\u05d5\u05e8"})]})]})]})}),k&&(0,h.jsx)("div",{className:"modal",style:{alignItems:"center"},children:(0,h.jsxs)("div",{className:"modal-content",style:{borderRadius:"37px",width:"360px",padding:"40px"},children:[(0,h.jsx)("img",{src:s(4628),alt:"",width:"160px",style:{margin:"10px 0 20px 0"}}),(0,h.jsx)("h2",{style:{margin:"20px 0"},children:"\u05d4\u05d5\u05e2\u05dc\u05d4 \u05d1\u05d4\u05e6\u05dc\u05d7\u05d4"}),(0,h.jsx)("h4",{children:"\u05d4\u05de\u05ea\u05db\u05d5\u05df \u05e9\u05dc\u05da \u05d4\u05d5\u05e2\u05dc\u05d4"}),(0,h.jsx)("h4",{children:"\u05ea\u05d5\u05db\u05dc/\u05d9 \u05dc\u05e8\u05d0\u05d5\u05ea \u05d0\u05ea \u05d6\u05d4 \u05d1\u05d3\u05e3 \u05d4\u05d1\u05d9\u05ea"}),(0,h.jsx)(o.k2,{to:"/",children:(0,h.jsx)("button",{className:"active",children:"\u05d7\u05d6\u05e8\u05d4 \u05dc\u05d3\u05e3 \u05d4\u05d1\u05d9\u05ea"})})]})})]})}},4628:(e,a,s)=>{e.exports=s.p+"static/media/save.d1ed604884b56183c4c6.png"}}]);
//# sourceMappingURL=554.dddb0d4c.chunk.js.map